
DROP SEQUENCE CALBOARDSEQ;
DROP TABLE CALBOARD;

CREATE SEQUENCE CALBOARDSEQ;

CREATE TABLE CALBOARD(
	SEQ NUMBER PRIMARY KEY,
	ID VARCHAR2(1000) NOT NULL,
	TITLE VARCHAR2(2000) NOT NULL,
	CONTENT VARCHAR2(4000) NOT NULL,
	MDATE VARCHAR2(12) NOT NULL,
	REGDATE DATE NOT NULL
);

MEMBER_ID VARCHAR2(400) REFERENCES MEMBER(MEMBER_ID) PRIMARY KEY,
VOLUNTEER_TITLE VARCHAR2(300) NOT NULL,
VOLUNTEER_CONTENT VARCHAR2(1000) NOT NULL,
VOLUNTEER_MDATE VARCHAR2(12) NOT NULL,
VOLUNTEER_SEQ NUMBER NOT NULL,
VOLUNTEER_REGDATE VARCHAR2(300) NOT NULL

SELECT * FROM CALBOARD;

--row_number() over(partition by @ order by)
--@로 group by햐서, 그룹 별 rownum 사용할 때

SELECT *
FROM(
	SELECT (ROW_NUMBER() OVER(PARTITION BY SUBSTR(MDATE,1,8) ORDER BY MDATE)) RN,
	SEQ, ID, TITLE, CONTENT, MDATE, REGDATE
	FROM CALBOARD
	WHERE ID='kh' AND SUBSTR(MDATE,1,6)='202001'
)
WHERE RN BETWEEN 1 AND 3;

SELECT COUNT(MDATE) FROM CALBOARD WHERE SUBSTR(MDATE, 1, 8) = '20200101';


